= pagify 0.5
by Lin Jen-Shin (a.k.a. godfat-真常[http://godfat.org])
  godfat (XD) godfat.org

== LINKS:

* github-project[http://github.com/godfat/pagify]
* rubyforge-project[http://rubyforge.org/projects/ludy]

== DESCRIPTION:

 pagination tools for plain Ruby, DataMapper, ActiveRecord, and other ORM.

== FEATURES:

* aims to be as flexible as possible
* separate intrusive "pagify" method and Array/DataMapper/ActiveRecord Pager.
* separate view helpers. there's html helper, yaml helper(planed), xml/rss/atom helper(planed).

== SYNOPSIS:

 the easiest (but not recommended) way to use it is:

 require 'pagify/data_mapper'
 require 'pagify/helpers/html'

 class User
   include DataMapper::Resource
   property :id, Serial
   property :name, String
   has n, :pets
 end

 class Pet
   include DataMapper::Resource
   property :id, Serial
   property :name, String
   belongs_to :user
 end

 User.pagify :page => 1, :per_page => 10 # => create a page contains users
 User.all(:name => 'godfat').pagify      # => create a page contains users named godfat

 User.get(1).pets.pagify                 # => create a page contains pets owned by user 1

 # create a string with page links.
 Pet.pagify.pager.html.links(params[:page]){ |page|
   # the block result would be used as url for each page
   "/pets/list?page=#{page}"
 }

 Pagify::Helpers::HTML.setting[:prev_text] = '<]' # globally change html setting
 # NOTE: if you would like to use instance level setting, you shouldn't use method pagify,
 # NOTE: or use User.pagify_cache = true; and face thread-safety problem.

 and the recommended usage is:

 class Pet
 # same as above
   def self.page num
     @pager ||= begin
       pager = Pagify::DataMapperPager.new(:per_page => 20)
       # below would be pager instance level setting
       # you can setup global setting mentioned above in your init script perhaps
       pager.html.setting[:separator] = ' . '
       pager.html.setting[:ellipsis]  = '...'
       pager
     end
     @pager.page(num)
   end
 end

 then you would use Pet.page(3) or user.pets.page(2) without encountering
 thread-safety problem or create a whole new pager in each request.

 # this would create next/prev links only.
 Pet.page(1).html.links_navigate{ |page|
   "/pets/list?page=#{page}"
 }

 # this would create next/prev links and other page links
 pet_pager.page(1).html.links_full{ |page|
   "/pets/show?page=#{page}"
 }

 and you can build your pager from scratch via BasicPager.
 e.g. BasicPager.new :fetcher => lambda{|*a|[]}, :counter => lambda{0}
 this would be similar to Pagify::NullPager.

 you can disable null page via passing :null_page => false to any pager,
 or set pager.null_page = false; anytime.

 see example or test for more examples (and use case for ActiveRecordPager).

== REQUIREMENTS:

* for Basic/Array  Pager: only ruby is needed
* for DataMapper   Pager: dm-core and dm-aggregates 0.9.6 and above
* for ActiveRecord Pager: activerecord 2.1.1 and above

== INSTALL:

* gem install pagify

== LICENSE:

Apache License 2.0

Copyright (c) 2008, Lin Jen-Shin (aka godfat 真常)

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
